generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Admin {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Profile {
  id           String      @id @default("singleton")
  profileImage String      @default("/assets/profile-pic.jpeg")
  aboutBio     String      @db.Text
  updatedAt    DateTime    @updatedAt
  aboutCards   AboutCard[]
}

model AboutCard {
  id          String  @id @default(cuid())
  icon        String
  title       String
  description String
  order       Int
  profileId   String  @default("singleton")
  profile     Profile @relation(fields: [profileId], references: [id], onDelete: Cascade)

  @@index([profileId])
}

model Project {
  slug             String        @id
  title            String
  shortDescription String        @db.Text
  tags             String[]
  cardImage        String
  type             String
  heroImage        String
  badge            String
  fullDescription  String[]
  techStack        String[]
  highlights       String[]
  metaYear         String
  metaRole         String
  metaPlatform     String
  metaStatus       String
  metaStatusColor  String
  createdAt        DateTime      @default(now())
  updatedAt        DateTime      @updatedAt

  gallery   GalleryItem[]
  mechanics Mechanic[]
  links     ProjectLink[]
}

model GalleryItem {
  id          String  @id @default(cuid())
  src         String
  caption     String
  order       Int
  projectSlug String
  project     Project @relation(fields: [projectSlug], references: [slug], onDelete: Cascade)

  @@index([projectSlug])
}

model Mechanic {
  id          String  @id @default(cuid())
  icon        String?
  title       String
  description String  @db.Text
  tech        String
  color       String  @default("primary")
  order       Int
  projectSlug String
  project     Project @relation(fields: [projectSlug], references: [slug], onDelete: Cascade)

  @@index([projectSlug])
}

model ProjectLink {
  id          String  @id @default(cuid())
  label       String
  url         String
  icon        String
  isPrimary   Boolean
  order       Int
  projectSlug String
  project     Project @relation(fields: [projectSlug], references: [slug], onDelete: Cascade)

  @@index([projectSlug])
}
